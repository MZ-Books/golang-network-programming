# IP 주소

: 인터넷 계층에서 사용되는 노드의 주소

## IPv4

- IP 주소는 4개의 옥텟으로 이루어짐(32비트)
- 목적지 노드가 속한 네트워크를 가리키는 네트워크 ID와 목적지 노드를 가리키는 호스트 ID로 이루어진다.
     - 같은 네트워크 ID를 공유하는 소규모 네트워크를 서브넷이라고 한다.
- CIDR을 사용하여 일종의 네트워크 접두사를 통해 네트워크 ID의 비트 수를 알려준다.
- 특수 IP 주소로 네트워크 주소(서브넷의 네트워크 주소를 나타내기 위함으로 해당 서브넷의 첫번째 IP주소를 할당한다)와 브로드캐스트 주소(서브넷의 가장 마지막 IP주소를 할당하여 네트워크 내에 있는 모든 노드에게 메시지를 전달하기 위함)
- 송수신 데이터를 다중화-역다중화를 하여 여러 노드와의 통신을 가능하도록 하게 하기 위해 포트가 등장하였다.
     - IP주소에 포트 번호를 조합하여 소켓 주소라고 한다.

## NAT (네트워크 주소 변환)

IPv4 주소가 고갈되는 문제를 해결하기 위해 여러 노드가 동일한 IP 주소를 사용하고, 방화벽/로드 밸런서/공유기 등의 장치를 통해 송수신 트래픽을 추적하고 올바른 노드로 라우팅해줄 수 있는 장치를 사용하는 방법이다.

- 어떤 노드로부터 요청이 왔는지는 포트 번호를 통해 구분
- NAT가 가지는 사설 IP 주소는 외부 네트워크에서 접근할 수 없다. (원한다면 포트포워딩 사용하기) NAT 내부 사설 네트워크에서 외부로의 접근은 가능하다.

## 유니/멀티/브로드캐스트

- 유니캐스트: 한 IP 주소에서 다른 IP 주소로 패킷 전송
- 멀티캐스트: 네트워크 내 모든 IP 주소로 패킷 전송하나 수신 측에서 해당 메시지를 받을지 말지 선택할 수 있다.
- 브로드캐스트: 네트워크 내 모든 IP 주소로 패킷 전송하나 수신 측에서 해당 메시지 받을 지 말 지 선택할 수 없다.

## ARP (주소 결정 프로토콜)

### 네트워크 과정

IPv4를 사용하여 네트워크 요청이 네트워크 경계(로컬 네트워크)까지 도달한다

→ 라우터가 목적지 노드의 MAC 주소로 데이터를 전송하고, 물리적인 네트워크 전송이 이루어진다.

### ARP 프로토콜 과정

IP 주소에 맞는 MAC 주소를 찾기 위해서 ARP 프로토콜이 사용된다.

ARP 테이블을 통해 매핑되는 MAC 주소를 찾고, 만약 해당 테이블에 목적지 IP 주소가 없다면, 로컬 네트워크에 브로드캐스트로 MAC 주소를 요청하여 테이블을 업데이트한다.

## IPv6

: IPv4 고갈 문제를 해결하기 위한 또 다른 해결책으로 8개의 헥스탯으로 이루어진 주소이다. (128비트)

- 연속된 0을 지워서 간략화하기도 한다.
- 네트워크 주소와 호스트 주소(인터페이스 ID)를 가진다.
     - 글로벌 라우팅 접두사(GRP, 네트워크 주소 첫 48비트)는 IPv6의 주소 공간을 그룹으로 세분화하는 데에 사용된다.
     - 서브넷 ID(네트워크 주소 마지막 16비트)는 GRP가 식별하는 네트워크를 특정 지역에 해당하는 네트워크로 세분화하는 데에 사용된다.
- 유니캐스트 주소(해당 주소를 가진 노드만 메시지를 수신한다), 멀티캐스트 주소(네트워크 주소의 하위 집합으로 메시지를 동시에 전달한다), 애니캐스트 주소(대기 중인 가장 가까운 노드로 전송한다)의 범주를 가진다.
- IPv4보다 효율적이고, 설정 자동화 및 보안성에 장점이 있다.

## ICMP (인터넷 제어 메시지 프로토콜)

: 로컬 네트워크 상태를 확인하기 위해 사용한다.

- 네트워크 문제 및 연결 가능한 노드 및 네트워크 확인, 로컬 네트워크 구성 정보 확인, 적절한 트래픽 경로 구성, 네트워크 타임 아웃에 대한 정보 확인을 담당한다.
